{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class RegisterService {\n  constructor(http, route) {\n    this.http = http;\n    this.route = route;\n    this.requestedUrl = 'api/v1/user';\n    this.authTokenStale = 'stale_auth_token';\n    this.authTokenNew = 'new_auth_token';\n    this.newToken = ' ';\n    this.refresh_token = localStorage.getItem('environment.dataKey');\n    this.currentToken = this.authTokenStale;\n  }\n  getAuthToken() {\n    let data = localStorage.getItem(environment.dataKey);\n    if (data) {\n      data = JSON.parse(atob(data));\n      this.currentToken = data;\n    }\n    return this.currentToken;\n  }\n  createUser(model) {\n    return this.http.post(`${environment.baseUrl}/api/v1/user/create`, model);\n  }\n  updateUser(id, model) {\n    return this.http.put(`${environment.baseUrl}/api/v1/user/update/${id}`, model);\n  }\n  refreshToken() {\n    return this.http.get(`${environment.baseUrl}/auth/api/v1/user/refreshtoken`);\n  }\n  logout() {\n    localStorage.clear();\n    this.route.navigate(['/login']);\n  }\n  getDecodedAccessToken(data) {\n    try {\n      return data;\n    } catch (Error) {\n      return null;\n    }\n  }\n  deleteUser(id) {\n    const headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    const url = `${environment.baseUrl}/api/v1/user/delete/${id}`;\n    return this.http.delete(url).pipe();\n  }\n}\nRegisterService.ɵfac = function RegisterService_Factory(t) {\n  return new (t || RegisterService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\nRegisterService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: RegisterService,\n  factory: RegisterService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,WAAW,QAAQ,8BAA8B;;;;AAO1D,OAAM,MAAOC,eAAe;EAW1BC,YAAoBC,IAAgB,EAAUC,KAAa;IAAvC,SAAI,GAAJD,IAAI;IAAsB,UAAK,GAALC,KAAK;IAVnD,iBAAY,GAAG,aAAa;IAErB,mBAAc,GAAW,kBAAkB;IAC3C,iBAAY,GAAW,gBAAgB;IAGtC,aAAQ,GAAG,GAAG;IAEd,kBAAa,GAAWC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC;IAGzE,IAAI,CAACC,YAAY,GAAG,IAAI,CAACC,cAAc;EACzC;EAEAC,YAAY;IACV,IAAIC,IAAI,GAAQL,YAAY,CAACC,OAAO,CAACN,WAAW,CAACW,OAAO,CAAC;IACzD,IAAID,IAAI,EAAE;MACRA,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,IAAI,CAAC,CAAC;MAC7B,IAAI,CAACH,YAAY,GAAGG,IAAI;;IAE1B,OAAO,IAAI,CAACH,YAAY;EAC1B;EAEAQ,UAAU,CAACC,KAAK;IACd,OAAO,IAAI,CAACb,IAAI,CAACc,IAAI,CAAC,GAAGjB,WAAW,CAACkB,OAAO,qBAAqB,EAAEF,KAAK,CAAC;EAC3E;EACAG,UAAU,CAACC,EAAE,EAAEJ,KAAK;IAClB,OAAO,IAAI,CAACb,IAAI,CAACkB,GAAG,CAClB,GAAGrB,WAAW,CAACkB,OAAO,uBAAuBE,EAAE,EAAE,EACjDJ,KAAK,CACN;EACH;EAEAM,YAAY;IACV,OAAO,IAAI,CAACnB,IAAI,CAACoB,GAAG,CAClB,GAAGvB,WAAW,CAACkB,OAAO,gCAAgC,CACvD;EACH;EAEAM,MAAM;IACJnB,YAAY,CAACoB,KAAK,EAAE;IACpB,IAAI,CAACrB,KAAK,CAACsB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EACjC;EAEAC,qBAAqB,CAACjB,IAAY;IAChC,IAAI;MACF,OAAOA,IAAI;KACZ,CAAC,OAAOkB,KAAK,EAAE;MACd,OAAO,IAAI;;EAEf;EAEAC,UAAU,CAACT,EAAE;IACX,MAAMU,OAAO,GAAG,IAAIC,OAAO,EAAE;IAE7BD,OAAO,CAACE,MAAM,CAAC,cAAc,EAAE,kBAAkB,CAAC;IAElD,MAAMC,GAAG,GAAG,GAAGjC,WAAW,CAACkB,OAAO,uBAAuBE,EAAE,EAAE;IAE7D,OAAO,IAAI,CAACjB,IAAI,CAAC+B,MAAM,CAAMD,GAAG,CAAC,CAACE,IAAI,EAAE;EAC1C;;AA7DWlC,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAmC,SAAfnC,eAAe;EAAAoC,YAFd;AAAM","names":["environment","RegisterService","constructor","http","route","localStorage","getItem","currentToken","authTokenStale","getAuthToken","data","dataKey","JSON","parse","atob","createUser","model","post","baseUrl","updateUser","id","put","refreshToken","get","logout","clear","navigate","getDecodedAccessToken","Error","deleteUser","headers","Headers","append","url","delete","pipe","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\hardik\\Downloads\\login-register-notes\\src\\app\\core\\services\\register.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Router } from '@angular/router';\r\nimport { catchError } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RegisterService {\r\n  requestedUrl = 'api/v1/user';\r\n\r\n  public authTokenStale: string = 'stale_auth_token';\r\n  public authTokenNew: string = 'new_auth_token';\r\n  public currentToken: string;\r\n\r\n  private newToken = ' ';\r\n  private current_token: string;\r\n  private refresh_token: string = localStorage.getItem('environment.dataKey');\r\n\r\n  constructor(private http: HttpClient, private route: Router) {\r\n    this.currentToken = this.authTokenStale;\r\n  }\r\n\r\n  getAuthToken() {\r\n    let data: any = localStorage.getItem(environment.dataKey);\r\n    if (data) {\r\n      data = JSON.parse(atob(data));\r\n      this.currentToken = data;\r\n    }\r\n    return this.currentToken;\r\n  }\r\n\r\n  createUser(model) {\r\n    return this.http.post(`${environment.baseUrl}/api/v1/user/create`, model);\r\n  }\r\n  updateUser(id, model) {\r\n    return this.http.put(\r\n      `${environment.baseUrl}/api/v1/user/update/${id}`,\r\n      model\r\n    );\r\n  }\r\n\r\n  refreshToken() {\r\n    return this.http.get(\r\n      `${environment.baseUrl}/auth/api/v1/user/refreshtoken`\r\n    );\r\n  }\r\n\r\n  logout() {\r\n    localStorage.clear();\r\n    this.route.navigate(['/login']);\r\n  }\r\n\r\n  getDecodedAccessToken(data: string): any {\r\n    try {\r\n      return data;\r\n    } catch (Error) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  deleteUser(id) {\r\n    const headers = new Headers();\r\n\r\n    headers.append('Content-Type', 'application/json');\r\n\r\n    const url = `${environment.baseUrl}/api/v1/user/delete/${id}`;\r\n\r\n    return this.http.delete<any>(url).pipe();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}